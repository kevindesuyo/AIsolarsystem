# 技術負債棚卸しメモ

## 1. 開発体験・ツールチェーン
- **Create React App依存**: `react-scripts`ベースでビルド・テストを実行しており、ViteやVitest等のモダンツールが未導入。ビルド速度や設定柔軟性に課題。
- **型設定の緩さ**: `tsconfig.json`で`allowJs: true`、`noImplicitAny: false`となっており、型安全性が担保できない。将来的なリファクタで潜在的なバグ混入リスク。
- **ESLint/Prettier未整備**: プロジェクトルートにESLint/Prettierのカスタム設定が無い。コードスタイルや品質ルールが統一されず、レビュー負荷が高い。
- **Git Hook/CI未構築**: Lint・テストを自動で強制する仕組みがなく、ブランチ間の品質差異が拡大しやすい。

## 2. テスト・品質保証
- **App.test.tsxが初期テンプレートのまま**: 現在のUI構造に一致しない`learn react`リンクを探すテストのため常に失敗する。実質テストスイートが機能していない。
- **物理演算の自動テスト欠如**: `simulationEngine.ts`, `utils/physics.ts`に単体テストがなく、回帰検知が困難。保存量検証や数値安定性を担保できない。
- **E2Eテスト未導入**: 操作体験（ドラッグ、プリセット読込、共有など）の保証がない。

## 3. 物理・描画アーキテクチャ
- **メインスレッド集中**: `hooks/useSimulation.ts`で描画・物理更新・メトリクス算出を同一ループで処理。Worker分離がないため高負荷時にUIがブロックする。
- **描画責務が集中**: `canvas/draw.ts`に背景、HUD、惑星描画がまとまっており、責務分離が弱く可読性が低下。拡張性や差し替えが困難。
- **メトリクス収集不足**: FPSや遅延といったデバッグ指標の取得・表示機構が未整備で、性能退行の可視化が難しい。

## 4. UX・アクセシビリティ
- **国際化未対応**: UI文言が固定で、ja/en切替や辞書管理が存在しない。
- **アクセシビリティサポート不足**: キーボード操作やARIAラベル設計が未整備。学習現場での利用にリスク。
- **ユーザー設定の永続化なし**: スケール/単位などの設定がリロードで失われ、使い勝手が低下。

## 5. ドキュメント・運用
- **READMEのライセンス未記載**: OSS利用や配布条件が不明瞭。
- **環境変数テンプレート欠如**: `.env.example`や設定ロードユーティリティがない。
- **自動更新基盤未導入**: Dependabot/Renovateがなく、依存更新の追従が遅れる可能性。

## 優先度指標
- P0: 型・テスト体制/CI整備 (Phase1, Phase4と直結)
- P1: Worker導入・描画責務分離 (Phase2の核心タスク)
- P2: UX/I18n/アクセシビリティ (Phase3の改善領域)
- P3: ドキュメント、環境整備 (Phase1-4で継続対応)
